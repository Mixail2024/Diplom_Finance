{% load static %}

<html>
    <head>
        <meta charset='UTF-8'>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel='stylesheet' type='text/css' href="{% static 'finance/style.css' %}">
        <title>Wallets</title>
    </head>
    <body>
        <div>
            <div class='nav_H'>
                <div class="wallet">Wallets</div>
                <button class="btn btn_add_wlt" onclick="location.href='{% url 'create_wlt' %}'">Add</button>
            </div>

            <form method='POST'>
            {% csrf_token %}
                <label>Initial balance on </label> {{ form.init_date }}
                {% if form.date.errors %}
                    <div style="color: red;">{{ form.init_date.errors }}</div>
                {% endif %}
                 <!-- Подключение Flatpickr -->
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
                <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        flatpickr("#datepicker", {
                            dateFormat: "Y-m-d",
                        });
                    });
                </script>
                <button class='btn nav_btn' type='submit' >Set</button>
            </form>

            {% for wlt in wlts %}
                {% for i in data %}
                    {% if wlt.pk == i.wlt_pk %}
                        <p><button class="btn btn_wlts" onclick="location.href='{% url 'home_wlt' wlt.pk %}'">
                        <div style="font-weight: bold; margin: 0px 5px 5px 5px">{{wlt.f_name}}</div>
                        <span>init bal {{i.bal_on_date}}</span>
                        <br><span>turnover {{i.after_dt_sum}} / {{i.after_ct_sum}}</span>
                        <br><span>current bal {{i.final_bal}}</span>
                            {% if wlt.w_limit > 0 %}
                                <br><span>limit {{wlt.w_limit}}</span>
                            {% endif %}
                        </button></p>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </div>
    </body>
</html>